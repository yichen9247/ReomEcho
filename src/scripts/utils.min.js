import axios from"axios";import Valine from"valine";import Swal from"sweetalert2";import Cookies from"js-cookie";import ColorThief from"colorthief";import siteConfig from"../../docs/main.js";import{useToast}from"vue-toastification";import prettyLog from"@/scripts/prettylog.min.js";import{useReomEchoStore}from"@/stores/ReomEchoStore.js";import{useMisicEchoStore}from"@/stores/MusicEchoStore.js";import{usePostsEchoStore}from"@/stores/PostsEchoStore.js";const toast=useToast(),readUserCopyOption=async()=>{document.querySelector("#section").addEventListener("copy",async()=>{isMobile()?await useDeviceMsg("复制成功"):await import("vue-toastification/dist/index.css").then(async()=>{toast.success(siteConfig.post.copy_noticeText)})})},openAdminPage=async()=>{siteConfig.system.admin.open?open(`/${siteConfig.system.admin.path}`):useDeviceMsg("博主未开启此功能")},openRssFeedPage=async()=>{siteConfig.sundry.site_openrss?open(`/${siteConfig.global.site_rssPath}`):useDeviceMsg("博主未开启此功能")},useDeviceMsg=async e=>{1==siteConfig.style.msgs_style?await showToast(e):2==siteConfig.style.msgs_style&&Promise.all([await import("layui"),await import("layui/dist/css/layui.css")]).then(async()=>{await layer.msg(e)})},writeClipBoardLink=async()=>{try{isSecureContext?navigator.clipboard?navigator.clipboard.writeText(location.href).then(async()=>{await useDeviceMsg("复制链接成功")}).catch(async()=>{await useDeviceMsg("复制链接失败")}):await ElMessage({type:"error",message:"浏览器不支持！"}):await ElMessage({type:"error",message:"未部署安全证书！"})}catch(e){await ElMessage({type:"error",message:"系统功能异常！"})}},isDeveloper=async()=>{isMobile()?await useDeviceMsg("功能正在开发中"):await ElMessage({message:"功能正在开发中",type:"warning",duration:2e3})},getRandomIntInclusiveInter=(e,o)=>{let t=Math.ceil(e),s=Math.floor(o);return Math.floor(Math.random()*(s-t+1))+t},isMobile=()=>!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),toRenderDominColor=async e=>new Promise((o,t)=>{if(siteConfig.style.dynamic_color){const t=new Image;t.src=e,t.crossOrigin="anonymous",t.onload=(async()=>{const e=await new ColorThief,s=await e.getPalette(t,2),i=await s.map(e=>"#"+e.map(e=>e.toString(16).padStart(2,"0")).join(""));o([i[0],s])})}}),reloadSystemStyles=async()=>{document.body.className="",document.body.style.setProperty("--dominColor",siteConfig.style.site_dominColor),document.body.style.setProperty("--buttoColor",siteConfig.style.site_buttoColor),document.body.style.setProperty("--transition",siteConfig.style.transt_interval),document.body.style.setProperty("--dotted_color1",siteConfig.style.dotted_color1),document.body.style.setProperty("--dotted_color2",siteConfig.style.dotted_color2),document.body.style.setProperty("--background",`url(${siteConfig.style.background_imag})`)},secondToDate=e=>{if(!e)return 0;let o=new Array(0,0,0,0,0);return e>=31536e3&&(o[0]=parseInt(e/31536e3),e%=31536e3),e>=86400&&(o[1]=parseInt(e/86400),e%=86400),e>=3600&&(o[2]=parseInt(e/3600),e%=3600),e>=60&&(o[3]=parseInt(e/60),e%=60),e>0&&(o[4]=e),o},checkAdminLogin=async()=>{let e=location.href.split("?")[0];"True"!==localStorage.getItem("loginStatus")?history.replaceState(null,"",e+"?login"):history.replaceState(null,"",e)},returnRoundColor=()=>{const e=["#23b7e5","#27c24c","#3a3f51","#fad733","#7266ba","#f05050","#42b883","#fbb9b6","#0099FF","#2AAE67","#FF5967","#26CEAA","#F16C8D","#3296FA","#425AEF","#ff7242"];let o=Math.floor(Math.random()*e.length);return e[o]},findItemInArray=(e,o)=>e.find(e=>e.item_name===o),backToTop=async()=>document.querySelector("#Reomecho").scrollTo({top:0,behavior:"smooth"}),checkStringUrl=e=>{const o=new RegExp("^(https?:\\/\\/)?((([a-zA-Z\\d]([a-zA-Z\\d-]*[a-zA-Z\\d])*)\\.)+[a-zA-Z]{2,}|(\\:\\d+)?(\\/[-a-zA-Z\\d%_.~+]*)*(\\?[;&a-zA-Z\\d%_.~+=-]*)?(\\#[-a-zA-Z\\d_]*)?$","i");return o.test(e)};export default{useReomEchoStore:useReomEchoStore,usePostsEchoStore:usePostsEchoStore,useMisicEchoStore:useMisicEchoStore,axios:axios,Cookies:Cookies,siteConfig:siteConfig,Swal:Swal,Valine:Valine,prettyLog:prettyLog,toast:toast,openAdminPage:openAdminPage,openRssFeedPage:openRssFeedPage,useDeviceMsg:useDeviceMsg,isMobile:isMobile,backToTop:backToTop,writeClipBoardLink:writeClipBoardLink,secondToDate:secondToDate,returnRoundColor:returnRoundColor,readUserCopyOption:readUserCopyOption,isDeveloper:isDeveloper,getRandomIntInclusiveInter:getRandomIntInclusiveInter,toRenderDominColor:toRenderDominColor,reloadSystemStyles:reloadSystemStyles,checkAdminLogin:checkAdminLogin,checkStringUrl:checkStringUrl,findItemInArray:findItemInArray};